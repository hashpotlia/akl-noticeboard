<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AKL NoticeBoard - Manager Portal</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#1e293b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ†Ô∏è</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Quill Rich Text Editor -->
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.min.js"></script>
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="../style.css">
    <!-- Admin Specific Styles -->
    <link rel="stylesheet" href="admin-style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Glide.js Carousel (vanilla, shadcn-inspired) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide/dist/css/glide.core.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide/dist/glide.min.js"></script>
</head>

<body class="antialiased">

<!-- Updated Login modal -->
<div id="login-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
    <div class="bg-slate-800/90 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full mx-4 border border-slate-700 shadow-2xl">
        <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-amber-400 mb-2">Manager Portal</h2>
            <p class="text-slate-400" id="auth-subtitle">Please sign in to access the NoticeBoard Portal</p>
        </div>
        <!-- Login Form -->
        <form id="login-form" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Email</label>
                <input type="email" id="login-email" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter your email">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Password</label>
                <input type="password" id="login-password" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter your password">
            </div>
            <button type="submit" id="login-btn" 
                    class="w-full bg-amber-600 hover:bg-amber-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg">
                Sign In
            </button>
        </form>
        <!-- Signup Form (Initially Hidden) -->
        <form id="signup-form" class="space-y-4 hidden">
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Email</label>
                <input type="email" id="signup-email" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter your email">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Password</label>
                <input type="password" id="signup-password" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Create a password (min 8 characters)">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Confirm Password</label>
                <input type="password" id="signup-confirm-password" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Confirm your password">
            </div>
            <button type="submit" id="signup-btn" 
                    class="w-full bg-green-600 hover:bg-green-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg">
                Create Account
            </button>
        </form>
        <!-- Signup Confirmation Form (Initially Hidden) -->
        <form id="signup-confirm-form" class="space-y-4 hidden">
            <div class="text-center mb-4">
                <p class="text-sm text-slate-400">We've sent a verification code to your email</p>
                <p class="text-xs text-slate-500 mt-1">Check your inbox and spam folder</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Verification Code</label>
                <input type="text" id="signup-code" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter 6-digit code"
                       maxlength="6">
            </div>
            <button type="submit" id="signup-confirm-btn" 
                    class="w-full bg-green-600 hover:bg-green-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg">
                Verify Account
            </button>
            <div class="text-center">
                <p class="text-sm text-slate-400 mb-2">Didn't receive the code?</p>
                <button type="button" id="resend-signup-code-btn" 
                        class="text-blue-400 hover:text-blue-300 text-sm transition-colors">
                    Resend Code
                </button>
            </div>
        </form>
        <!-- Password Reset Form (Initially Hidden) -->
        <form id="reset-form" class="space-y-4 hidden">
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Email</label>
                <input type="email" id="reset-email" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter your email">
            </div>
            <button type="submit" id="reset-btn" 
                    class="w-full bg-blue-600 hover:bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg">
                Send Reset Link
            </button>
        </form>
        <!-- Password Reset Confirmation Form (Initially Hidden) -->
        <form id="reset-confirm-form" class="space-y-4 hidden">
            <div class="text-center mb-4">
                <p class="text-sm text-slate-400">Enter the verification code sent to your email</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Verification Code</label>
                <input type="text" id="reset-code" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter 6-digit code">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">New Password</label>
                <input type="password" id="reset-new-password" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Enter new password (min 8 characters)">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">Confirm New Password</label>
                <input type="password" id="reset-confirm-password" required 
                       class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-amber-500 focus:ring-amber-500"
                       placeholder="Confirm new password">
            </div>
            <button type="submit" id="reset-confirm-btn" 
                    class="w-full bg-green-600 hover:bg-green-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg">
                Reset Password
            </button>
        </form>
        <div id="login-error" class="mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300 text-sm hidden"></div>
        <!-- Auth Mode Switcher -->
        <div class="mt-6 text-center space-y-2">
            <div id="login-mode-switcher">
                <button type="button" id="show-signup" class="text-green-400 hover:text-green-300 text-sm transition-colors mr-4">
                    Create Account
                </button>
                <button type="button" id="show-reset" class="text-blue-400 hover:text-blue-300 text-sm transition-colors">
                    Forgot Password?
                </button>
            </div>
            <div id="signup-mode-switcher" class="hidden">
                <button type="button" id="back-to-login" class="text-amber-400 hover:text-amber-300 text-sm transition-colors">
                    ‚Üê Back to Sign In
                </button>
            </div>
            <div id="reset-mode-switcher" class="hidden">
                <button type="button" id="back-to-login-2" class="text-amber-400 hover:text-amber-300 text-sm transition-colors">
                    ‚Üê Back to Sign In
                </button>
            </div>
            <div id="reset-confirm-mode-switcher" class="hidden">
                <button type="button" id="back-to-reset" class="text-blue-400 hover:text-blue-300 text-sm transition-colors mr-4">
                    ‚Üê Back to Reset
                </button>
                <button type="button" id="back-to-login-3" class="text-amber-400 hover:text-amber-300 text-sm transition-colors">
                    ‚Üê Back to Sign In
                </button>
            </div>
            <div id="signup-confirm-mode-switcher" class="hidden">
                <button type="button" id="back-to-signup" class="text-green-400 hover:text-green-300 text-sm transition-colors mr-4">
                    ‚Üê Back to Sign Up
                </button>
                <button type="button" id="back-to-login-4" class="text-amber-400 hover:text-amber-300 text-sm transition-colors">
                    ‚Üê Back to Sign In
                </button>
            </div>
        </div>
        <div class="mt-4 text-center">
            <a href="../index.html" class="text-slate-500 hover:text-slate-400 text-sm transition-colors">
                ‚Üê Back to NoticeBoard
            </a>
        </div>
    </div>
</div>



    <div id="admin-app" class="min-h-screen bg-slate-900 text-slate-300 flex flex-col">

        <!-- Admin Header -->
        <header class="bg-slate-900/70 backdrop-blur-lg sticky top-0 z-40 border-b border-slate-800">
            <nav class="container mx-auto px-4 lg:px-6">
                <div class="flex items-center justify-between h-16">
                    <!-- Logo / Title -->
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <svg class="w-8 h-8 text-amber-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-slate-100">Manager Portal</h1>
                            <p class="text-xs text-slate-400 hidden md:block">AKL NoticeBoard Portal</p>
                        </div>
                    </div>

                    <!-- Navigation -->
					<div class="hidden md:flex items-center space-x-3">
						<button id="nav-dashboard" class="admin-tab active text-sm font-semibold px-4 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="dashboard">
							Dashboard
						</button>
						<button id="nav-notices" class="admin-tab text-sm font-semibold px-4 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="notices">
							Manage Notices
						</button>
						<button id="nav-users" class="admin-tab text-sm font-semibold px-4 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="users">
							Manage Users
						</button>
						<button id="nav-acknowledgments" class="admin-tab text-sm font-semibold px-4 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="acknowledgments">
							Acknowledgments
						</button>
						<button id="nav-analytics" class="admin-tab text-sm font-semibold px-4 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="analytics">
							Analytics
						</button>
					</div>


                    <!-- User Actions -->
                    <div class="flex items-center space-x-4">
                        <!-- Home Button -->
                        <a href="../index.html" class="bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm flex items-center space-x-2">
                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                            </svg>
                            <span class="hidden md:inline">Home</span>
                        </a>
						
						<!-- Log out -->
<div class="flex items-center space-x-4">
    <button id="logout-btn" class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm transition-colors">
        Logout
    </button>
</div>


                        <!-- Admin Info -->
                        <div class="text-sm text-slate-400 flex flex-col items-start" style="min-width:120px">
                            <div>User: <span id="admin-name" class="text-amber-400 font-semibold">Loading...</span></div>
                            <span id="admin-role-pill" class="role-badge role-manager mt-1" style="display:inline-block; background-color:#ff9900; color:white; font-size:0.75rem; font-weight:600; text-transform:uppercase; letter-spacing:0.05em;">Loading...</span>
                        </div>

                        <!-- Mobile Menu -->
                        <button id="mobile-menu-btn" class="md:hidden p-2 rounded-md hover:bg-slate-800 transition-colors">
                            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Mobile Navigation -->
				<div id="mobile-nav" class="hidden md:hidden pb-4 border-t border-slate-800 mt-4">
					<div class="flex flex-col space-y-2 pt-4">
						<button class="admin-tab mobile text-left px-3 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="dashboard">Dashboard</button>
						<button class="admin-tab mobile text-left px-3 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="notices">Manage Notices</button>
						<button class="admin-tab mobile text-left px-3 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="users">Manage Users</button>
						<button class="admin-tab mobile text-left px-3 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="acknowledgments">Acknowledgments</button>
						<button class="admin-tab mobile text-left px-3 py-2 rounded-full transition-all shadow bg-slate-800/60 hover:bg-amber-500/20 hover:text-amber-400 border border-slate-700/60" data-tab="analytics">Analytics</button>
					</div>
				</div>

            </nav>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto p-4 md:p-6 lg:p-8">
            
            <!-- Admin Content Container -->
            <div id="admin-content">
                <!-- Dynamic content based on selected tab -->
                
                <!-- Dashboard Content (Default) -->
                <div id="dashboard-content" class="admin-tab-content active">
                    <!-- Key Metrics Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-900/60 to-slate-900/80 backdrop-blur-lg border border-blue-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-blue-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-blue-400 text-sm font-medium">Total Notices</p>
                            <p class="text-3xl font-bold text-white mt-2" id="total-notices-count">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-amber-900/60 to-slate-900/80 backdrop-blur-lg border border-amber-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-amber-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-amber-400 text-sm font-medium">Pending Acknowledgments</p>
                            <p class="text-3xl font-bold text-white mt-2" id="pending-acks-count">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-red-900/60 to-slate-900/80 backdrop-blur-lg border border-red-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-red-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-red-400 text-sm font-medium">Critical Notices</p>
                            <p class="text-3xl font-bold text-white mt-2" id="critical-notices-count">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-green-900/60 to-slate-900/80 backdrop-blur-lg border border-green-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-green-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-green-400 text-sm font-medium">Acknowledgment Rate</p>
                            <p class="text-3xl font-bold text-white mt-2" id="ack-rate">0%</p>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-8 mb-8">
                        <h2 class="text-xl font-bold text-amber-400 mb-4">Quick Actions</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quick-action-btn bg-amber-600 hover:bg-amber-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg" onclick="showPostNoticeModal()">
                                Post New Notice
                            </button>
                            <button class="quick-action-btn bg-red-600 hover:bg-red-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg" onclick="postCriticalNotice()">
                                Post Critical Notice
                            </button>
                            <button class="quick-action-btn bg-blue-600 hover:bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-lg" onclick="exportComplianceReport()">
                                Export Compliance Report
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-8">
                        <h2 class="text-xl font-bold text-amber-400 mb-4">Recent Activity</h2>
                        <div id="recent-activity" class="space-y-3">
                            <!-- Dynamic activity feed -->
                        </div>
                    </div>
                </div>

                <!-- Notice Management Content -->
                <div id="notices-content" class="admin-tab-content">
                    <!-- Notice Management Header -->
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                        <h2 class="text-2xl font-bold text-amber-400">Notice Management</h2>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="showPostNoticeModal()">
                                Post New Notice
                            </button>
                            <button class="btn-secondary bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="showBulkActionsModal()">
                                Bulk Actions
                            </button>
                        </div>
                    </div>

                    <!-- Filters and Search -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-6 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <input type="text" id="notice-search" placeholder="Search notices..." class="form-input bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500" />
                            <select id="category-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Categories</option>
                                <option value="Safety">Safety</option>
                                <option value="Operations">Operations</option>
                                <option value="Policy">Policy</option>
                                <option value="People">People</option>
                                <option value="Training">Training</option>
                                <option value="Maintenance">Maintenance</option>
                            </select>
                            <select id="priority-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Priorities</option>
                                <option value="critical">Critical</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                            <select id="status-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="expired">Expired</option>
                                <option value="pinned">Pinned</option>
                            </select>
                        </div>
                    </div>

                    <!-- Notices Table -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-slate-700">
                                    <tr>
                                        <th class="table-header p-4">
                                            <input type="checkbox" id="select-all-notices" class="rounded border-slate-600 bg-slate-900 text-amber-500 focus:ring-amber-500" />
                                        </th>
                                        <th class="table-header p-4">Title</th>
                                        <th class="table-header p-4">Category</th>
                                        <th class="table-header p-4">Priority</th>
                                        <th class="table-header p-4">Author</th>
                                        <th class="table-header p-4">Created</th>
                                        <th class="table-header p-4">Ack Rate</th>
                                        <th class="table-header p-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="notices-table-body" class="divide-y divide-slate-700">
                                    <!-- Dynamic notice rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div id="notices-pagination" class="mt-6">
                        <!-- Pagination controls -->
                    </div>
                </div>
				
				<!-- User Management Content -->
                <div id="users-content" class="admin-tab-content">
                    <!-- User Management Header -->
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                        <h2 class="text-2xl font-bold text-amber-400">User Management</h2>
                        <div class="flex items-center space-x-4">
                            <button class="btn-primary bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="showCreateUserModal()">
                                Add New User
                            </button>
                            <button class="btn-secondary bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="showBulkUserActionsModal()">
                                Bulk Actions
                            </button>
                        </div>
                    </div>

                    <!-- User Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="bg-gradient-to-br from-blue-900/60 to-slate-900/80 backdrop-blur-lg border border-blue-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-blue-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-blue-400 text-sm font-medium">Total Users</p>
                            <p class="text-3xl font-bold text-white mt-2" id="total-users-stat">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-green-900/60 to-slate-900/80 backdrop-blur-lg border border-green-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-green-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-green-400 text-sm font-medium">Active Users</p>
                            <p class="text-3xl font-bold text-white mt-2" id="active-users-stat">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-amber-900/60 to-slate-900/80 backdrop-blur-lg border border-amber-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-amber-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-amber-400 text-sm font-medium">Managers</p>
                            <p class="text-3xl font-bold text-white mt-2" id="managers-stat">0</p>
                        </div>
                        <div class="bg-gradient-to-br from-red-900/60 to-slate-900/80 backdrop-blur-lg border border-red-500 rounded-2xl shadow-2xl p-6 flex flex-col justify-between group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-red-400/20 to-transparent rotate-12"></div>
                            </div>
                            <p class="text-red-400 text-sm font-medium">Super Admins</p>
                            <p class="text-3xl font-bold text-white mt-2" id="admins-stat">0</p>
                        </div>
                    </div>

                    <!-- User Filters -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-6 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <input type="text" id="user-search" placeholder="Search users..." class="form-input bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500" />
                            <select id="role-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Roles</option>
                                <option value="SUPER_ADMIN">Super Admin</option>
                                <option value="MANAGER">Manager</option>
                                <option value="USER">User</option>
                            </select>
                            <select id="department-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Departments</option>
                                <option value="Management">Management</option>
                                <option value="Operations">Operations</option>
                                <option value="Safety">Safety</option>
                                <option value="Maintenance">Maintenance</option>
                                <option value="General">General</option>
                            </select>
                            <select id="user-status-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-slate-700">
                                    <tr>
                                        <th class="table-header p-4">
                                            <input type="checkbox" id="select-all-users" class="rounded border-slate-600 bg-slate-900 text-amber-500 focus:ring-amber-500" />
                                        </th>
                                        <th class="table-header p-4">User</th>
                                        <th class="table-header p-4">Role</th>
                                        <th class="table-header p-4">Department</th>
                                        <th class="table-header p-4">Status</th>
                                        <th class="table-header p-4">Last Login</th>
                                        <th class="table-header p-4">Created</th>
                                        <th class="table-header p-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body" class="divide-y divide-slate-700">
                                    <!-- Dynamic user rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- Acknowledgments Content -->
                <div id="acknowledgments-content" class="admin-tab-content">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">Acknowledgment Tracking</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <!-- By Notice View -->
                        <div class="lg:col-span-2 bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-6">
                            <h3 class="text-xl font-bold text-amber-400 mb-4">By Notice</h3>
                            <div class="space-y-4" id="notice-ack-list">
                                <!-- Dynamic notice acknowledgment cards -->
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl p-6 flex flex-col group relative overflow-hidden">
                            <div class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] animate-shimmer bg-gradient-to-r from-transparent via-amber-400/20 to-transparent rotate-12"></div>
                            </div>
                            <h3 class="text-xl font-bold text-amber-400 mb-4">Quick Stats</h3>
                            <div class="space-y-4">
                                <div class="stat-item">
                                    <span class="text-slate-400">Overall Compliance Rate</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="overall-compliance-bar"></div>
                                        </div>
                                        <span class="text-white font-bold" id="overall-compliance-text">0%</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <span class="text-slate-400">Total Users</span>
                                    <span class="text-white font-bold" id="total-users-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="text-slate-400">Overdue Acknowledgments</span>
                                    <span class="text-red-400 font-bold" id="overdue-count">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Acknowledgment Table -->
                    <div class="bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl overflow-hidden">
                        <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                            <h3 class="text-xl font-bold text-amber-400 mb-0">Detailed Acknowledgment Log</h3>
                            <button class="btn-secondary bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="exportAcknowledgmentReport()">
                                Export Report
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-slate-700">
                                    <tr>
                                        <th class="table-header p-4">Notice</th>
                                        <th class="table-header p-4">User</th>
                                        <th class="table-header p-4">Acknowledged At</th>
                                        <th class="table-header p-4">Response Time</th>
                                        <th class="table-header p-4">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="acknowledgment-table-body" class="divide-y divide-slate-700">
                                    <!-- Dynamic acknowledgment rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Analytics Content -->
                <div id="analytics-content" class="admin-tab-content">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">Analytics & Reports</h2>
                    <!-- Analytics Filters -->
                    <div class="flex flex-wrap gap-4 mb-6">
                        <div>
                            <label for="analytics-date-range" class="block text-xs text-slate-400 mb-1">Date Range</label>
                            <input type="date" id="analytics-date-start" class="form-input bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500 w-auto" />
                            <span class="mx-1 text-slate-400">to</span>
                            <input type="date" id="analytics-date-end" class="form-input bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500 w-auto" />
                        </div>
                        <div>
                            <label for="analytics-category-filter" class="block text-xs text-slate-400 mb-1">Category</label>
                            <select id="analytics-category-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500 w-auto">
                                <option value="">All</option>
                                <option value="Safety">Safety</option>
                                <option value="Operations">Operations</option>
                                <option value="Policy">Policy</option>
                                <option value="People">People</option>
                                <option value="Training">Training</option>
                                <option value="Maintenance">Maintenance</option>
                            </select>
                        </div>
                        <div>
                            <label for="analytics-role-filter" class="block text-xs text-slate-400 mb-1">Role</label>
                            <select id="analytics-role-filter" class="form-select bg-slate-900 border border-slate-700 text-slate-200 rounded-lg focus:border-amber-500 focus:ring-amber-500 w-auto">
                                <option value="">All</option>
                                <option value="USER">User</option>
                                <option value="MANAGER">Manager</option>
                                <option value="SUPER_ADMIN">Super Admin</option>
                            </select>
                        </div>
                    </div>
                    <!-- Analytics Custom Grid Layout -->
                    <div class="analytics-grid gap-6">
                      <div class="carousel-card analytics-trends bg-slate-800/80 backdrop-blur-lg border border-blue-500 rounded-2xl shadow-2xl">
                        <h3 class="carousel-title">Acknowledgment Trends</h3>
                        <canvas id="acknowledgment-trends-chart" class="h-64"></canvas>
                        <button class="export-btn mt-4 bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" id="export-trends-csv">Export CSV</button>
                      </div>
                      <div class="carousel-card analytics-category bg-slate-800/80 backdrop-blur-lg border border-amber-500 rounded-2xl shadow-2xl">
                        <h3 class="carousel-title">Category Breakdown</h3>
                        <canvas id="category-breakdown-chart" class="h-64"></canvas>
                        <button class="export-btn mt-4 bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" id="export-category-csv">Export CSV</button>
                      </div>
                      <div class="carousel-card analytics-user bg-slate-800/80 backdrop-blur-lg border border-green-500 rounded-2xl shadow-2xl">
                        <h3 class="carousel-title">User Performance</h3>
                        <canvas id="user-performance-chart" class="h-40"></canvas>
                        <button class="export-btn mt-4 bg-green-600 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" id="export-user-csv">Export CSV</button>
                      </div>
                      <div class="carousel-card analytics-export bg-slate-800/80 backdrop-blur-lg border border-slate-700 rounded-2xl shadow-2xl">
                        <h3 class="carousel-title">Export Options</h3>
                        <div class="space-y-3 mt-6">
                          <button class="export-btn bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="exportComplianceReport()">Compliance Report</button>
                          <button class="export-btn bg-green-600 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="exportUserReport()">User Activity Report</button>
                          <button class="export-btn bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="exportNoticeReport()">Notice Summary Report</button>
                          <button class="export-btn bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-lg" onclick="exportFullDatabase()">Full Database Export</button>
                        </div>
                      </div>
                    </div>
                </div>

            </div>

        </main>

        <!-- Footer -->
        <footer class="bg-slate-900 border-t border-slate-800 mt-auto">
            <div class="container mx-auto py-4 px-6 text-center text-slate-500 text-sm">
                <p>AKL NoticeBoard Manager Portal v1.0 - Complete Management Control</p>
                <p class="text-xs mt-1">Part of the DCO Ecosystem ‚Ä¢ Made with ‚ù§Ô∏è for AKL Management</p>
            </div>
        </footer>

    </div>

    <!-- Modals Container -->
    <div id="modal-container"></div>
    
    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-5 right-5 z-50"></div>

    <!-- Scripts -->
    <script src="admin-script.js"></script>
</body>
</html>
